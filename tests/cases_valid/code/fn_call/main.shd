gpu fn __add__(left: f32, right: f32) -> f32;
gpu fn __mul__(left: f32, right: f32) -> f32;

buf result_from_fn = double(two,);
buf two = 2.;

run {
    result_from_fn = transformed_buffer();
}

fn transformed_buffer() -> f32 {
    var a = square(result_from_fn);
    var b = double(result_from_fn);
    return a + b;
}

fn square(value: f32) -> f32 {
    return value * value;
}

fn double(value: f32) -> f32 {
    return value * 2.;
}

buf no_return_value_result = 0;

run {
    update_buffer();
}

fn update_buffer() {
    no_return_value_result = 1;
}

buf sum1 = 0.;
buf sum2 = 0.;
buf sum3 = 0.;

fn add(left: f32, right: f32) -> f32 {
    return left + right;
}

run {
    sum1 = add(left: 1., right: 2.);
    sum3 = add(left: 1., 2.);
    sum2 = add(1., right: 2.);
}
